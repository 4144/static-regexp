static-regexp
=============

Static regular expression using c++11 templates.

Usage
-----

	make
	./build/native/translate [ns]
 
Write your regexp to stdin and copy translated output from stdout. And insert it as template parameter for StaticRegExp class in your code.

Example
-------

	^[a-z]+://[a-z][a-z0-9]+(\.[a-z][a-z0-9]+)*/

will turn into:

	Seq<Begin,Plus<CSet<'a','z'>>,Str<0x3a,0x2f,0x2f>,CSet<'a','z'>,Plus<CSet<0x30,0x39,'a','z'>, Star<Seq<Chr<0x2e>,CSet<'a','z'>,Plus<CSet<0x30,0x39,'a','z'>>>, Chr<0x2f>>>>

After inserted into minitest.cpp it will turn into this code (using clang 3.4):

	_main:
	0c00   pushq  %rbp
	0c01   movq   %rsp,%rbp
	0c04   pushq  %r15
	0c06   pushq  %r14
	0c08   pushq  %r13
	0c0a   pushq  %r12
	0c0c   pushq  %rbx
	0c0d   subq   $0x18,%rsp
	0c11   cmpl   $0x02,%edi
	0c14   jl     0x0f50
	0c1a   movq   0x08(%rsi),%r13
	0c1e   movb   0x00(%r13),%cl
	0c22   testb  %cl,%cl
	0c24   je     0x0f44
	0c2a   leaq   0x0a(%r13),%rax
	0c2e   movq   %rax,0xc8(%rbp)
	0c32   leaq   0x09(%r13),%rax
	0c36   movq   %rax,0xd0(%rbp)
	0c3a   xorl   %eax,%eax
	0c3c   nopl   0x00(%rax)
	0c40   movq   %rax,0xc0(%rbp)
	0c44   testq  %rax,%rax
	0c47   jne    0x0f30
	0c4d   addb   $0x9f,%cl
	0c50   movl   $0x00000001,%edi
	0c55   cmpb   $0x19,%cl
	0c58   movq   0xc8(%rbp),%rdx
	0c5c   movl   $0x00000000,%esi
	0c61   movq   0xd0(%rbp),%rbx
	0c65   ja     0x0f30
	0c6b   nopl   0x00(%rax,%rax)
	0c70   movq   %rdx,%r11
	0c73   movq   %rsi,%r14
	0c76   movq   %rbx,%r15
	0c79   movq   %rdi,%r8
	0c7c   movb   0x00(%r13,%r8),%al
	0c81   movb   %al,%cl
	0c83   addb   $0x9f,%cl
	0c86   leaq   0x01(%r11),%rdx
	0c8a   leaq   0x01(%r14),%rsi
	0c8e   leaq   0x01(%r15),%rbx
	0c92   leaq   0x01(%r8),%rdi
	0c96   cmpb   $0x1a,%cl
	0c99   jb     0x0c70
	0c9b   cmpb   $0x3a,%al
	0c9d   jne    0x0f30
	0ca3   cmpb   $0x2f,0x00(%r13,%rdi)
	0ca9   jne    0x0f30
	0caf   cmpb   $0x2f,0x02(%r8,%r13)
	0cb5   jne    0x0f30
	0cbb   movb   0x03(%r13,%r8),%al
	0cc0   addb   $0x9f,%al
	0cc2   cmpb   $0x19,%al
	0cc4   ja     0x0f30
	0cca   movb   0x04(%r8,%r13),%al
	0ccf   movb   %al,%cl
	0cd1   addb   $0xd0,%cl
	0cd4   cmpb   $0x0a,%cl
	0cd7   jb     0x0ce3
	0cd9   addb   $0x9f,%al
	0cdb   cmpb   $0x19,%al
	0cdd   ja     0x0f30
	0ce3   movb   0x05(%r8,%r13),%r9b
	0ce8   cmpb   $0x2f,%r9b
	0cec   je     0x0f61
	0cf2   leaq   0x03(%r8),%r10
	0cf6   cmpb   $0x2e,%r9b
	0cfa   jne    0x0db2
	0d00   movb   0x06(%r8,%r13),%al
	0d05   addb   $0x9f,%al
	0d07   cmpb   $0x19,%al
	0d09   ja     0x0db2
	0d0f   movb   0x07(%r8,%r13),%al
	0d14   movb   %al,%bl
	0d16   addb   $0xd0,%bl
	0d19   movl   $0x00000002,%esi
	0d1e   cmpb   $0x0a,%bl
	0d21   jb     0x0d30
	0d23   addb   $0x9f,%al
	0d25   cmpb   $0x19,%al
	0d27   ja     0x0db2
	0d2d   nopl   (%rax)
	0d30   incq   %rsi
	0d33   movb   (%r15),%cl
	0d36   incq   %r15
	0d39   movb   %cl,%al
	0d3b   addb   $0x9f,%al
	0d3d   movb   %cl,%bl
	0d3f   addb   $0xd0,%bl
	0d42   cmpb   $0x0a,%bl
	0d45   jb     0x0d30
	0d47   cmpb   $0x1a,%al
	0d49   jb     0x0d30
	0d4b   cmpb   $0x2f,%cl
	0d4e   je     0x0f61
	0d54   cmpb   $0x2e,%cl
	0d57   jne    0x0db2
	0d59   leaq   (%rsi,%r10),%rax
	0d5d   movb   0x03(%r13,%rax),%bl
	0d62   addb   $0x9f,%bl
	0d65   cmpb   $0x19,%bl
	0d68   ja     0x0db2
	0d6a   movb   0x04(%r13,%rax),%al
	0d6f   movb   %al,%dl
	0d71   addb   $0xd0,%dl
	0d74   cmpb   $0x0a,%dl
	0d77   jae    0x0dac
	0d79   movq   0xd0(%rbp),%rax
	0d7d   leaq   (%rax,%rsi),%rdi
	0d81   addq   %r14,%rdi
	0d84   addq   $0x02,%rsi
	0d88   nopl   0x00000000(%rax,%rax)
	0d90   incq   %rsi
	0d93   movb   (%rdi),%cl
	0d95   incq   %rdi
	0d98   movb   %cl,%al
	0d9a   addb   $0x9f,%al
	0d9c   movb   %cl,%dl
	0d9e   addb   $0xd0,%dl
	0da1   cmpb   $0x0a,%dl
	0da4   jb     0x0d90
	0da6   cmpb   $0x1a,%al
	0da8   jb     0x0d90
	0daa   jmp    0x0d4b
	0dac   addb   $0x9f,%al
	0dae   cmpb   $0x19,%al
	0db0   jbe    0x0d79
	0db2   movb   %r9b,%al
	0db5   addb   $0xd0,%al
	0db7   movl   $0x00000001,%edi
	0dbc   movl   $0x00000002,%ecx
	0dc1   cmpb   $0x0a,%al
	0dc3   jae    0x0dcb
	0dc5   movq   0xc8(%rbp),%r12
	0dc9   jmp    0x0de0
	0dcb   addb   $0x9f,%r9b
	0dcf   cmpb   $0x1a,%r9b
	0dd3   movq   0xc8(%rbp),%r12
	0dd7   jae    0x0f30
	0ddd   nopl   (%rax)
	0de0   movq   %rcx,%r15
	0de3   leaq   0x02(%r10,%rdi),%rax
	0de8   movb   0x00(%r13,%rax),%al
	0ded   cmpb   $0x2f,%al
	0def   je     0x0f61
	0df5   cmpb   $0x2e,%al
	0df7   jne    0x0ef7
	0dfd   leaq   0x03(%r10,%rdi),%rax
	0e02   movb   0x00(%r13,%rax),%al
	0e07   addb   $0x9f,%al
	0e09   cmpb   $0x1a,%al
	0e0b   jae    0x0ef7
	0e11   leaq   0x02(%rdi),%rsi
	0e15   leaq   0x03(%rdi),%rcx
	0e19   leaq   (%rdi,%r10),%rax
	0e1d   movb   0x04(%r13,%rax),%al
	0e22   movb   %al,%dl
	0e24   addb   $0xd0,%dl
	0e27   movl   $0x00000002,%edi
	0e2c   cmpb   $0x0a,%dl
	0e2f   jae    0x0e36
	0e31   movq   %r11,%rax
	0e34   jmp    0x0e50
	0e36   addb   $0x9f,%al
	0e38   cmpb   $0x19,%al
	0e3a   movq   %r11,%rax
	0e3d   ja     0x0ef7
	0e43   nopl   %cs:0x00000000(%rax,%rax)
	0e50   incq   %rdi
	0e53   movb   (%rax),%r9b
	0e56   incq   %rax
	0e59   movb   %r9b,%r8b
	0e5c   addb   $0x9f,%r8b
	0e60   movb   %r9b,%dl
	0e63   addb   $0xd0,%dl
	0e66   cmpb   $0x0a,%dl
	0e69   jb     0x0e50
	0e6b   cmpb   $0x1a,%r8b
	0e6f   jb     0x0e50
	0e71   nopl   %cs:0x00000000(%rax,%rax)
	0e80   cmpb   $0x2f,%r9b
	0e84   je     0x0f61
	0e8a   cmpb   $0x2e,%r9b
	0e8e   jne    0x0ef7
	0e90   leaq   (%rcx,%rdi),%rax
	0e94   addq   %r10,%rax
	0e97   movb   0x00(%r13,%rax),%al
	0e9c   addb   $0x9f,%al
	0e9e   cmpb   $0x19,%al
	0ea0   ja     0x0ef7
	0ea2   leaq   (%rdi,%rsi),%rax
	0ea6   addq   %r10,%rax
	0ea9   movb   0x02(%r13,%rax),%al
	0eae   movb   %al,%dl
	0eb0   addb   $0xd0,%dl
	0eb3   cmpb   $0x0a,%dl
	0eb6   jae    0x0ef1
	0eb8   leaq   (%r12,%rdi),%rax
	0ebc   addq   %r14,%rax
	0ebf   addq   $0x02,%rdi
	0ec3   nopl   %cs:0x00000000(%rax,%rax)
	0ed0   incq   %rdi
	0ed3   movb   (%rax),%r9b
	0ed6   incq   %rax
	0ed9   movb   %r9b,%dl
	0edc   addb   $0x9f,%dl
	0edf   movb   %r9b,%bl
	0ee2   addb   $0xd0,%bl
	0ee5   cmpb   $0x0a,%bl
	0ee8   jb     0x0ed0
	0eea   cmpb   $0x1a,%dl
	0eed   jb     0x0ed0
	0eef   jmp    0x0e80
	0ef1   addb   $0x9f,%al
	0ef3   cmpb   $0x19,%al
	0ef5   jbe    0x0eb8
	0ef7   leaq   0x01(%r10,%r15),%rax
	0efc   movb   0x00(%r13,%rax),%dl
	0f01   movb   %dl,%al
	0f03   addb   $0x9f,%al
	0f05   addb   $0xd0,%dl
	0f08   incq   %r12
	0f0b   incq   %r11
	0f0e   leaq   0x01(%r15),%rcx
	0f12   cmpb   $0x0a,%dl
	0f15   movq   %r15,%rdi
	0f18   jb     0x0de0
	0f1e   cmpb   $0x1a,%al
	0f20   movq   %r15,%rdi
	0f23   jb     0x0de0
	0f29   nopl   0x00000000(%rax)
	0f30   movq   0xc0(%rbp),%rax
	0f34   movb   0x01(%r13,%rax),%cl
	0f39   incq   %rax
	0f3c   testb  %cl,%cl
	0f3e   jne    0x0c40
	0f44   leaq   0x0000003f(%rip),%rdi
	0f4b   callq  0x0f6a    ; symbol stub for: _puts
	0f50   xorl   %eax,%eax
	0f52   addq   $0x18,%rsp
	0f56   popq   %rbx
	0f57   popq   %r12
	0f59   popq   %r13
	0f5b   popq   %r14
	0f5d   popq   %r15
	0f5f   popq   %rbp
	0f60   ret
	0f61   leaq   0x00000025(%rip),%rdi
	0f68   jmp    0x0f4b