static-regexp
=============

Static regular expression using c++11 templates.

Usage
-----

	make
	./build/native/translate [ns]
 
Write your regexp to stdin and copy translated output from stdout. And insert it as template parameter for StaticRegExp class in your code.

Example
-------

	^[a-z]+://[a-z][a-z0-9]+(\.[a-z][a-z0-9]+)*/

will turn into:

	Seq<Begin,Plus<CSet<'a','z'>>,Str<0x3a,0x2f,0x2f>,CSet<'a','z'>,Plus<CSet<0x30,0x39,'a','z'>, Star<Seq<Chr<0x2e>,CSet<'a','z'>,Plus<CSet<0x30,0x39,'a','z'>>>, Chr<0x2f>>>>

After inserted into minitest.cpp it will turn into this code (using clang 3.4):

	_main:
	0000000100000c00   pushq  %rbp
	0000000100000c01   movq   %rsp,%rbp
	0000000100000c04   pushq  %r15
	0000000100000c06   pushq  %r14
	0000000100000c08   pushq  %r13
	0000000100000c0a   pushq  %r12
	0000000100000c0c   pushq  %rbx
	0000000100000c0d   subq   $0x18,%rsp
	0000000100000c11   cmpl   $0x02,%edi
	0000000100000c14   jl     0x100000f50
	0000000100000c1a   movq   0x08(%rsi),%r13
	0000000100000c1e   movb   0x00(%r13),%cl
	0000000100000c22   testb  %cl,%cl
	0000000100000c24   je     0x100000f44
	0000000100000c2a   leaq   0x0a(%r13),%rax
	0000000100000c2e   movq   %rax,0xc8(%rbp)
	0000000100000c32   leaq   0x09(%r13),%rax
	0000000100000c36   movq   %rax,0xd0(%rbp)
	0000000100000c3a   xorl   %eax,%eax
	0000000100000c3c   nopl   0x00(%rax)
	0000000100000c40   movq   %rax,0xc0(%rbp)
	0000000100000c44   testq  %rax,%rax
	0000000100000c47   jne    0x100000f30
	0000000100000c4d   addb   $0x9f,%cl
	0000000100000c50   movl   $0x00000001,%edi
	0000000100000c55   cmpb   $0x19,%cl
	0000000100000c58   movq   0xc8(%rbp),%rdx
	0000000100000c5c   movl   $0x00000000,%esi
	0000000100000c61   movq   0xd0(%rbp),%rbx
	0000000100000c65   ja     0x100000f30
	0000000100000c6b   nopl   0x00(%rax,%rax)
	0000000100000c70   movq   %rdx,%r11
	0000000100000c73   movq   %rsi,%r14
	0000000100000c76   movq   %rbx,%r15
	0000000100000c79   movq   %rdi,%r8
	0000000100000c7c   movb   0x00(%r13,%r8),%al
	0000000100000c81   movb   %al,%cl
	0000000100000c83   addb   $0x9f,%cl
	0000000100000c86   leaq   0x01(%r11),%rdx
	0000000100000c8a   leaq   0x01(%r14),%rsi
	0000000100000c8e   leaq   0x01(%r15),%rbx
	0000000100000c92   leaq   0x01(%r8),%rdi
	0000000100000c96   cmpb   $0x1a,%cl
	0000000100000c99   jb     0x100000c70
	0000000100000c9b   cmpb   $0x3a,%al
	0000000100000c9d   jne    0x100000f30
	0000000100000ca3   cmpb   $0x2f,0x00(%r13,%rdi)
	0000000100000ca9   jne    0x100000f30
	0000000100000caf   cmpb   $0x2f,0x02(%r8,%r13)
	0000000100000cb5   jne    0x100000f30
	0000000100000cbb   movb   0x03(%r13,%r8),%al
	0000000100000cc0   addb   $0x9f,%al
	0000000100000cc2   cmpb   $0x19,%al
	0000000100000cc4   ja     0x100000f30
	0000000100000cca   movb   0x04(%r8,%r13),%al
	0000000100000ccf   movb   %al,%cl
	0000000100000cd1   addb   $0xd0,%cl
	0000000100000cd4   cmpb   $0x0a,%cl
	0000000100000cd7   jb     0x100000ce3
	0000000100000cd9   addb   $0x9f,%al
	0000000100000cdb   cmpb   $0x19,%al
	0000000100000cdd   ja     0x100000f30
	0000000100000ce3   movb   0x05(%r8,%r13),%r9b
	0000000100000ce8   cmpb   $0x2f,%r9b
	0000000100000cec   je     0x100000f61
	0000000100000cf2   leaq   0x03(%r8),%r10
	0000000100000cf6   cmpb   $0x2e,%r9b
	0000000100000cfa   jne    0x100000db2
	0000000100000d00   movb   0x06(%r8,%r13),%al
	0000000100000d05   addb   $0x9f,%al
	0000000100000d07   cmpb   $0x19,%al
	0000000100000d09   ja     0x100000db2
	0000000100000d0f   movb   0x07(%r8,%r13),%al
	0000000100000d14   movb   %al,%bl
	0000000100000d16   addb   $0xd0,%bl
	0000000100000d19   movl   $0x00000002,%esi
	0000000100000d1e   cmpb   $0x0a,%bl
	0000000100000d21   jb     0x100000d30
	0000000100000d23   addb   $0x9f,%al
	0000000100000d25   cmpb   $0x19,%al
	0000000100000d27   ja     0x100000db2
	0000000100000d2d   nopl   (%rax)
	0000000100000d30   incq   %rsi
	0000000100000d33   movb   (%r15),%cl
	0000000100000d36   incq   %r15
	0000000100000d39   movb   %cl,%al
	0000000100000d3b   addb   $0x9f,%al
	0000000100000d3d   movb   %cl,%bl
	0000000100000d3f   addb   $0xd0,%bl
	0000000100000d42   cmpb   $0x0a,%bl
	0000000100000d45   jb     0x100000d30
	0000000100000d47   cmpb   $0x1a,%al
	0000000100000d49   jb     0x100000d30
	0000000100000d4b   cmpb   $0x2f,%cl
	0000000100000d4e   je     0x100000f61
	0000000100000d54   cmpb   $0x2e,%cl
	0000000100000d57   jne    0x100000db2
	0000000100000d59   leaq   (%rsi,%r10),%rax
	0000000100000d5d   movb   0x03(%r13,%rax),%bl
	0000000100000d62   addb   $0x9f,%bl
	0000000100000d65   cmpb   $0x19,%bl
	0000000100000d68   ja     0x100000db2
	0000000100000d6a   movb   0x04(%r13,%rax),%al
	0000000100000d6f   movb   %al,%dl
	0000000100000d71   addb   $0xd0,%dl
	0000000100000d74   cmpb   $0x0a,%dl
	0000000100000d77   jae    0x100000dac
	0000000100000d79   movq   0xd0(%rbp),%rax
	0000000100000d7d   leaq   (%rax,%rsi),%rdi
	0000000100000d81   addq   %r14,%rdi
	0000000100000d84   addq   $0x02,%rsi
	0000000100000d88   nopl   0x00000000(%rax,%rax)
	0000000100000d90   incq   %rsi
	0000000100000d93   movb   (%rdi),%cl
	0000000100000d95   incq   %rdi
	0000000100000d98   movb   %cl,%al
	0000000100000d9a   addb   $0x9f,%al
	0000000100000d9c   movb   %cl,%dl
	0000000100000d9e   addb   $0xd0,%dl
	0000000100000da1   cmpb   $0x0a,%dl
	0000000100000da4   jb     0x100000d90
	0000000100000da6   cmpb   $0x1a,%al
	0000000100000da8   jb     0x100000d90
	0000000100000daa   jmp    0x100000d4b
	0000000100000dac   addb   $0x9f,%al
	0000000100000dae   cmpb   $0x19,%al
	0000000100000db0   jbe    0x100000d79
	0000000100000db2   movb   %r9b,%al
	0000000100000db5   addb   $0xd0,%al
	0000000100000db7   movl   $0x00000001,%edi
	0000000100000dbc   movl   $0x00000002,%ecx
	0000000100000dc1   cmpb   $0x0a,%al
	0000000100000dc3   jae    0x100000dcb
	0000000100000dc5   movq   0xc8(%rbp),%r12
	0000000100000dc9   jmp    0x100000de0
	0000000100000dcb   addb   $0x9f,%r9b
	0000000100000dcf   cmpb   $0x1a,%r9b
	0000000100000dd3   movq   0xc8(%rbp),%r12
	0000000100000dd7   jae    0x100000f30
	0000000100000ddd   nopl   (%rax)
	0000000100000de0   movq   %rcx,%r15
	0000000100000de3   leaq   0x02(%r10,%rdi),%rax
	0000000100000de8   movb   0x00(%r13,%rax),%al
	0000000100000ded   cmpb   $0x2f,%al
	0000000100000def   je     0x100000f61
	0000000100000df5   cmpb   $0x2e,%al
	0000000100000df7   jne    0x100000ef7
	0000000100000dfd   leaq   0x03(%r10,%rdi),%rax
	0000000100000e02   movb   0x00(%r13,%rax),%al
	0000000100000e07   addb   $0x9f,%al
	0000000100000e09   cmpb   $0x1a,%al
	0000000100000e0b   jae    0x100000ef7
	0000000100000e11   leaq   0x02(%rdi),%rsi
	0000000100000e15   leaq   0x03(%rdi),%rcx
	0000000100000e19   leaq   (%rdi,%r10),%rax
	0000000100000e1d   movb   0x04(%r13,%rax),%al
	0000000100000e22   movb   %al,%dl
	0000000100000e24   addb   $0xd0,%dl
	0000000100000e27   movl   $0x00000002,%edi
	0000000100000e2c   cmpb   $0x0a,%dl
	0000000100000e2f   jae    0x100000e36
	0000000100000e31   movq   %r11,%rax
	0000000100000e34   jmp    0x100000e50
	0000000100000e36   addb   $0x9f,%al
	0000000100000e38   cmpb   $0x19,%al
	0000000100000e3a   movq   %r11,%rax
	0000000100000e3d   ja     0x100000ef7
	0000000100000e43   nopl   %cs:0x00000000(%rax,%rax)
	0000000100000e50   incq   %rdi
	0000000100000e53   movb   (%rax),%r9b
	0000000100000e56   incq   %rax
	0000000100000e59   movb   %r9b,%r8b
	0000000100000e5c   addb   $0x9f,%r8b
	0000000100000e60   movb   %r9b,%dl
	0000000100000e63   addb   $0xd0,%dl
	0000000100000e66   cmpb   $0x0a,%dl
	0000000100000e69   jb     0x100000e50
	0000000100000e6b   cmpb   $0x1a,%r8b
	0000000100000e6f   jb     0x100000e50
	0000000100000e71   nopl   %cs:0x00000000(%rax,%rax)
	0000000100000e80   cmpb   $0x2f,%r9b
	0000000100000e84   je     0x100000f61
	0000000100000e8a   cmpb   $0x2e,%r9b
	0000000100000e8e   jne    0x100000ef7
	0000000100000e90   leaq   (%rcx,%rdi),%rax
	0000000100000e94   addq   %r10,%rax
	0000000100000e97   movb   0x00(%r13,%rax),%al
	0000000100000e9c   addb   $0x9f,%al
	0000000100000e9e   cmpb   $0x19,%al
	0000000100000ea0   ja     0x100000ef7
	0000000100000ea2   leaq   (%rdi,%rsi),%rax
	0000000100000ea6   addq   %r10,%rax
	0000000100000ea9   movb   0x02(%r13,%rax),%al
	0000000100000eae   movb   %al,%dl
	0000000100000eb0   addb   $0xd0,%dl
	0000000100000eb3   cmpb   $0x0a,%dl
	0000000100000eb6   jae    0x100000ef1
	0000000100000eb8   leaq   (%r12,%rdi),%rax
	0000000100000ebc   addq   %r14,%rax
	0000000100000ebf   addq   $0x02,%rdi
	0000000100000ec3   nopl   %cs:0x00000000(%rax,%rax)
	0000000100000ed0   incq   %rdi
	0000000100000ed3   movb   (%rax),%r9b
	0000000100000ed6   incq   %rax
	0000000100000ed9   movb   %r9b,%dl
	0000000100000edc   addb   $0x9f,%dl
	0000000100000edf   movb   %r9b,%bl
	0000000100000ee2   addb   $0xd0,%bl
	0000000100000ee5   cmpb   $0x0a,%bl
	0000000100000ee8   jb     0x100000ed0
	0000000100000eea   cmpb   $0x1a,%dl
	0000000100000eed   jb     0x100000ed0
	0000000100000eef   jmp    0x100000e80
	0000000100000ef1   addb   $0x9f,%al
	0000000100000ef3   cmpb   $0x19,%al
	0000000100000ef5   jbe    0x100000eb8
	0000000100000ef7   leaq   0x01(%r10,%r15),%rax
	0000000100000efc   movb   0x00(%r13,%rax),%dl
	0000000100000f01   movb   %dl,%al
	0000000100000f03   addb   $0x9f,%al
	0000000100000f05   addb   $0xd0,%dl
	0000000100000f08   incq   %r12
	0000000100000f0b   incq   %r11
	0000000100000f0e   leaq   0x01(%r15),%rcx
	0000000100000f12   cmpb   $0x0a,%dl
	0000000100000f15   movq   %r15,%rdi
	0000000100000f18   jb     0x100000de0
	0000000100000f1e   cmpb   $0x1a,%al
	0000000100000f20   movq   %r15,%rdi
	0000000100000f23   jb     0x100000de0
	0000000100000f29   nopl   0x00000000(%rax)
	0000000100000f30   movq   0xc0(%rbp),%rax
	0000000100000f34   movb   0x01(%r13,%rax),%cl
	0000000100000f39   incq   %rax
	0000000100000f3c   testb  %cl,%cl
	0000000100000f3e   jne    0x100000c40
	0000000100000f44   leaq   0x0000003f(%rip),%rdi
	0000000100000f4b   callq  0x100000f6a    ; symbol stub for: _puts
	0000000100000f50   xorl   %eax,%eax
	0000000100000f52   addq   $0x18,%rsp
	0000000100000f56   popq   %rbx
	0000000100000f57   popq   %r12
	0000000100000f59   popq   %r13
	0000000100000f5b   popq   %r14
	0000000100000f5d   popq   %r15
	0000000100000f5f   popq   %rbp
	0000000100000f60   ret
	0000000100000f61   leaq   0x00000025(%rip),%rdi
	0000000100000f68   jmp    0x100000f4b